.macondo-manager(id="#{_id}")
    p.manager--info
        strong model: 
        span.modelName #{_modelName} 
        strong id: 
        span.id= _id
    p.manager--links    
        a.manager--links--new(href="/edit/#{_modelName}/new") New Page
        |  
        a.manager--links--edit(href="/edit/#{_modelName}/#{_id}") Edit
        |  
        a.manager--links--delete(href="/delete/#{_modelName}/#{_id}") Delete
        
    script(type="text/javascript").
        if ('undefined' === typeof jQuery) {
            document.write('<script src=' +
            ('__proto__' in {} ? 'zepto' : 'jquery') +
            '.min.js><\/script>')
        }
        
    script(src="/datepickr/datepickr.js", type="text/javascript")
    script(src="/tinymce/tinymce.min.js", type="text/javascript")
    
    script(type="text/javascript").
        $('.manager--links a').click(function (event) {
            event.preventDefault();
            $('body').append($('<div id="macondo-admin-layer">'));
            console.log('ajax request: ' + this.href);
            $.ajax({
                url: this.href,
                success: function (data) {
                    var $admin = $('#macondo-admin-layer');
                    $admin.html(data);
                    $admin.find('.cancel-button').click(function () {
                        $admin.remove();
                    });
                    $admin.find('form').submit(function (event) {
                        $form = $admin.find('form');
                        event.preventDefault();
                        $.ajax({
                            url: $form.attr('action'),
                            data: $form.serialize(),
                            type: 'POST',
                            success: function () {
                                $admin.remove();           
                                window.location.reload();                 
                            }
                        });
                        return false;
                    });
                }
            })
        });